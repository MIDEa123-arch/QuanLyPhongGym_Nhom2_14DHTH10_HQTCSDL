@model IEnumerable<QL_PHONGGYM.Models.GoiTap>


@{
    ViewBag.Title = "Index";
}

<style>
    .extended-card img {
        filter: brightness(70%) !important;
    }

    .extended-card:hover img {
        filter: brightness(100%) !important;
    }
</style>
<div class="w-100 py-5" style="background-color: #c5eff7; border-top: 2px solid #5eb1ec">
    <div class="d-flex flex-column gap-2 text-center container mx-auto">
        <span class="text-dark text-uppercase fs-3 fw-bold">Hội viên The Gym</span>
        <div class="w-50 mx-auto">
            <span class="text-wrap text-dark small">
                The Gym cung cấp cho Hội Viên gói tập Tất Cả Chi Nhánh và 1 Chi Nhánh.
                Cả hai đều cho bạn tham gia tập luyện không giới hạn trong không gian <strong>Không phán xét</strong>,
                nơi mọi người cảm thấy luôn được chào đón và thuộc về từ khi bước vào.
            </span>
            <a class="link-primary" href="@Url.Action("GoiTap", "GoiTap")">Xem chi tiết</a>
        </div>
    </div>

    <div class="mt-3 d-flex gap-5 justify-content-center flex-wrap">
        @foreach (var item in Model)
        {
            var is12Thang = item.TenGoi == "12 tháng";
            <div class="card py-3 px-3 rounded-4 @(is12Thang ? "" : "bg-white")"
                 style="width: 18rem; @(is12Thang ? "background: linear-gradient(45deg, #6a11cb, #2575fc);" : "")">
                <div class="d-flex justify-content-between align-items-center w-100">
                    <div class="h5 text-uppercase m-0 @(is12Thang ? "text-white" : "text-black")"
                         style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">
                        @item.TenGoi
                    </div>
                    <div class="text-uppercase fw-bold rounded-2 p-2" style="font-size: 11px; background-color: #17f696">Tất cả chi nhánh</div>
                </div>
                <div class="mt-4">
                    <span class="fs-4 fw-bolder @(is12Thang ? "text-white" : "text-black")">
                        @item.Gia.ToString("N0").Replace(",", ".").Replace("'", ".") VNĐ
                    </span>
                    <span class="small @(is12Thang ? "text-white" : "text-black")">
                        / @(is12Thang ? "Năm" : "tháng")
                    </span>
                </div>
                <div class="border-top border-bottom border-1 py-1 @(is12Thang ? "text-white border-white" : "text-black border-dark") mt-2 fw-light"
                     style="font-size: 15px; height: 100px; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 4; overflow: hidden;">
                    @item.MoTa
                </div>
                @if (Session["MaKH"] != null)
                {
                    <a class="w-50 mx-auto btn rounded-pill btn-outline-primary border-0 fw-bold mt-4 text-white btn-info"
                       href="@Url.Action("CheckoutGoiTap", "GoiTap", new { id = item.MaGoiTap, url = Request.RawUrl })">
                        Tham gia
                    </a>
                }
                else
                {
                    <button class="w-50 mx-auto btn rounded-pill btn-outline-primary border-0 fw-bold mt-4 text-white btn-info"
                            data-bs-toggle="modal" data-bs-target="#loginModal">
                        Tham gia
                    </button>
                }
            </div>
        }
    </div>
</div>

<div class="container mt-4">
    <h6 class="text-uppercase fw-bold mb-2 text-secondary">Thực phẩm bổ sung</h6>
    <p class="d-flex gap-5 align-items-end">
        <span class="text-uppercase fw-bold fs-5 mb-0">Made in USA</span>
        <a class="link-dark fw-bold fs-6" href="@Url.Action("Product", "Product", new {xuatXu = "USA"})">View All</a>
    </p>

    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-2">
        @foreach (var item in ViewBag.usaProducts)
        {
            <div class="col">
                <a href="@Url.Action("ProductDetail", "Product", new { id = item.MaSP })"
                   class="card h-100 border-1 text-decoration-none @(item.SoLuongTon == 0 ? "opacity-75" : "")">
                    <div class="position-relative">
                        <img src="@Url.Content("~/Content/Images/" + item.UrlHinhAnhChinh)"
                             class="card-img-top" alt="@item.TenSP" style="object-fit: cover; height: 16rem;">

                        @if (item.SoLuongTon == 0)
                        {
                            <div class="position-absolute top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center"
                                 style="background-color: rgba(0,0,0,0.5);">
                                <span class="badge bg-danger fs-5 py-2 px-4">HẾT HÀNG</span>
                            </div>
                        }

                        <span class="badge bg-white text-dark position-absolute bottom-0 start-0 m-2 small fw-semibold">
                            @item.XuatXu
                        </span>
                    </div>
                    <div class="card-body p-2">
                        <div style="height: 4rem">
                            <div class="fw-bold small text-dark">@item.TenSP</div>
                            <div class="text-secondary small">@item.Hang</div>
                        </div>
                        @if (item.SoLuongTon == 0)
                        {
                            <div class="fw-bold text-muted mt-1">
                                <span class="badge bg-secondary">Hết hàng</span>
                            </div>
                        }
                        else if (item.GiaKhuyenMai != null && item.GiaKhuyenMai < item.DonGia)
                        {
                            <div class="fw-bold text-danger mt-1">
                                @item.GiaKhuyenMai.ToString("N0").Replace(",", ".").Replace("'", ".") VNĐ
                                <span class="text-secondary text-decoration-line-through ms-1 small">
                                    @item.DonGia.ToString("N0").Replace(",", ".").Replace("'", ".") VNĐ
                                </span>
                            </div>
                        }
                        else
                        {
                            <div class="fw-bold text-dark mt-1">@item.DonGia.ToString("N0").Replace(",", ".").Replace("'", ".") VNĐ</div>
                        }
                    </div>
                </a>
            </div>
        }
    </div>
</div>
<div id="carouselExampleIndicators1" class="carousel slide mt-3 overflow-hidden" data-bs-ride="carousel">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators1" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators1" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators1" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>

    <div class="carousel-inner" style="max-height: 470px;">
        <div class="carousel-item active">
            <img src="@Url.Content("~/Content/Images/poster3.jpeg")" class="d-block w-100 h-100 object-fit-cover" alt="...">
        </div>
        <div class="carousel-item">
            <img src="@Url.Content("~/Content/Images/poster4.jpeg")" class="d-block w-100 h-100 object-fit-cover" alt="...">
        </div>
        <div class="carousel-item">
            <img src="@Url.Content("~/Content/Images/poster5.jpeg")" class="d-block w-100 h-100 object-fit-cover" alt="...">
        </div>
    </div>
</div>
<div class="container mt-4">
    <h6 class="text-uppercase fw-bold mb-2 text-secondary">Quần áo tập luyện</h6>
    <p class="d-flex gap-5 align-items-end">
        <span class="text-uppercase fw-bold fs-5 mb-0">Nike</span>
        <a class="link-dark fw-bold fs-6" href="@Url.Action("Product", "Product", new {hang = "Nike"})">View All</a>
    </p>

    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-2">
        @foreach (var item in ViewBag.nikeProducts)
        {
            <div class="col">
                <a href="@Url.Action("ProductDetail", "Product", new { id = item.MaSP })"
                   class="card h-100 border-1 text-decoration-none">
                    <div class="position-relative">
                        <img src="@Url.Content("~/Content/Images/" + item.UrlHinhAnhChinh)"
                             class="card-img-top" alt="@item.TenSP" style="object-fit: cover; height: 16rem;">
                        <span class="badge bg-white text-dark position-absolute bottom-0 start-0 m-2 small fw-semibold">
                            @item.XuatXu
                        </span>
                    </div>
                    <div class="card-body p-2">
                        <div style="height: 4rem">
                            <div class="fw-bold small text-dark">@item.TenSP</div>
                            <div class="text-secondary small">@item.Hang</div>
                        </div>
                        @if (item.SoLuongTon == 0)
                        {
                            <div class="fw-bold text-muted mt-1">
                                <span class="badge bg-secondary small fw-bold">Hết hàng</span>
                            </div>
                        }
                        else if (item.GiaKhuyenMai != null && item.GiaKhuyenMai < item.DonGia)
                        {
                            <div class="fw-bold text-danger mt-1">
                                @item.GiaKhuyenMai.ToString("N0").Replace(",", ".").Replace("'", ".") VNĐ
                                <span class="text-secondary text-decoration-line-through ms-1 small">
                                    @item.DonGia.ToString("N0").Replace(",", ".").Replace("'", ".") VNĐ
                                </span>
                            </div>
                        }
                        else
                        {
                            <div class="fw-bold text-dark mt-1">@item.DonGia.ToString("N0").Replace(",", ".").Replace("'", ".") VNĐ</div>
                        }
                    </div>
                </a>
            </div>
        }
    </div>
</div>
<div class="container" style="margin-top: 100px">
    <div class="d-flex gap-5 align-items-end">
        <span class="fs-4 text-uppercase fw-bold">Start your training journey</span>
        <a class="link-dark fw-bold fs-5" href="#">View All</a>
    </div>
    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-2 mt-3">
        @foreach (var item in ViewBag.Class)
        {
            <div class="col">
                <a href=""
                   class="card h-100 border-0 text-decoration-none">
                    <div class="position-relative">
                        <img src="@Url.Content("~/Content/Images/" + @item.TenChuyenMon + ".jpg")"
                             class="card-img-top" alt="@item.TenChuyenMon" style="object-fit: cover; height: 25rem;">
                    </div>
                    <div class="card-body mt-4 p-0 text-uppercase fw-bold text-black">
                        @item.TenChuyenMon
                    </div>
                </a>
            </div>
        }
    </div>
</div>

<div class="container-fluid bg-light py-5 mt-5 px-0">
    <div class="bg-light container-fluid text-center mb-3">
        <p class="fs-2 fw-bold mb-2">Testimonial</p>
        <p class="small fw-light text-muted">What our customers say</p>
    </div>
    <div id="carouselExampleIndicators2" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators" style="bottom: -30px;">
            <button type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide-to="0" class="active bg-dark" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide-to="1" class="bg-dark" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide-to="2" class="bg-dark" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner pb-5">
            <div class="carousel-item active">
                <div class="w-75 mx-auto d-flex flex-column justify-content-center align-items-center px-3">
                    <img src="@Url.Content("~/Content/Images/user1.png")" class="rounded-circle mb-3" style="width: 90px; height: 90px; object-fit: cover;" />
                    <div class="text-center fst-italic text-secondary w-100" style="font-size: 1.2rem; line-height: 1.8;">
                        "The Gym thật sự là một trải nghiệm tuyệt vời cho bất cứ ai muốn cải thiện sức khỏe và vóc dáng. Không chỉ có hệ thống máy móc hiện đại, sạch sẽ, mà không gian còn rất thoải mái, tạo cảm giác hứng thú mỗi khi bước vào. Các huấn luyện viên chuyên nghiệp, nhiệt tình, luôn sẵn sàng hướng dẫn từng động tác chuẩn xác để tránh chấn thương. Mình đặc biệt thích các lớp group class vì vừa có động lực vừa được học thêm nhiều kỹ thuật mới. Đây là nơi lý tưởng để giải tỏa stress."
                    </div>
                    <p class="fw-bold mt-5 fs-6 mb-0">- Jane Doe</p>
                </div>
            </div>
            <div class="carousel-item">
                <div class="w-75 mx-auto d-flex flex-column justify-content-center align-items-center px-3">
                    <img src="@Url.Content("~/Content/Images/user2.png")" class="rounded-circle mb-3" style="width: 90px; height: 90px; object-fit: cover;" />
                    <div class="text-center fst-italic text-secondary w-100" style="font-size: 1.2rem; line-height: 1.8;">
                        "Mình đã thử khá nhiều phòng gym khác nhau, nhưng The Gym thực sự làm mình ấn tượng. Môi trường tập luyện rất năng động, máy móc đầy đủ, từ cardio đến free weights, và luôn được bảo trì tốt. Điều mình thích nhất là sự thân thiện và quan tâm của nhân viên, họ luôn nhắc nhở bạn khởi động, hướng dẫn sử dụng thiết bị an toàn và kiểm tra tiến độ tập luyện của bạn. Ngoài ra, không gian phòng thay đồ và tắm rửa sạch sẽ, rộng rãi, tạo cảm giác thoải mái, không bị ngột ngạt."
                    </div>
                    <p class="fw-bold mt-5 fs-6 mb-0">- Bill Smith</p>
                </div>
            </div>
            <div class="carousel-item">
                <div class="w-75 mx-auto d-flex flex-column justify-content-center align-items-center px-3">
                    <img src="@Url.Content("~/Content/Images/user3.png")" class="rounded-circle mb-3" style="width: 90px; height: 90px; object-fit: cover;" />
                    <div class="text-center fst-italic text-secondary w-100" style="font-size: 1.2rem; line-height: 1.8;">
                        "Một điểm cộng lớn của The Gym là không gian rất hiện đại, máy móc mới và đầy đủ tiện nghi. Các khu vực tập luyện được phân chia rõ ràng, có khu cardio, khu tạ tự do, khu functional training và cả phòng group class. Mình đặc biệt thích các thiết bị smart machine, có thể theo dõi tiến độ tập luyện qua app của gym. Ngoài ra, đội ngũ huấn luyện viên chuyên nghiệp, nhiệt tình và luôn lắng nghe, điều chỉnh động tác của bạn để tối đa hóa hiệu quả và giảm thiểu rủi ro chấn thương."
                    </div>
                    <p class="fw-bold mt-5 fs-6 mb-0">- Athur Mogarn</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid bg-white py-5">
    <div class="container">
        <div class="row row-cols-md-3 row-cols-lg-4 d-flex justify-content-center">
            <div class="col">
                <a href="" class="card h-100 text-decoration-none rounded-4 extended-card position-relative overflow-hidden">
                    <img src="@Url.Content("~/Content/Images/promotion1.jpg")" class="card-img" style="object-fit: cover; height: 28rem;">
                    <div class="card-img-overlay d-flex flex-column justify-content-center align-items-center text-white text-center p-4">
                        <h2 class="fw-bold mb-0 text-uppercase" style="font-size: 2.5rem;">Join a PT program</h2>
                    </div>
                </a>
            </div>
            <div class="col">
                <a href="" class="card h-100 text-decoration-none rounded-4 extended-card position-relative overflow-hidden">
                    <img src="@Url.Content("~/Content/Images/promotion2.jpg")" class="card-img" style="object-fit: cover; height: 28rem;">
                    <div class="card-img-overlay d-flex flex-column justify-content-center align-items-center text-white text-center p-4">
                        <h2 class="fw-bold mb-0 text-uppercase" style="font-size: 2.5rem;">workout tips</h2>
                    </div>
                </a>
            </div>
            <div class="col">
                <a href="" class="card h-100 text-decoration-none rounded-4 extended-card position-relative overflow-hidden">
                    <img src="@Url.Content("~/Content/Images/promotion3.jpg")" class="card-img" style="object-fit: cover; height: 28rem;">
                    <div class="card-img-overlay d-flex flex-column justify-content-center align-items-center text-white text-center p-4">
                        <h2 class="fw-bold mb-0 text-uppercase" style="font-size: 2.5rem;">about us</h2>
                    </div>
                </a>
            </div>
            <div class="col">
                <a href="" class="card h-100 text-decoration-none rounded-4 extended-card position-relative overflow-hidden">
                    <img src="@Url.Content("~/Content/Images/promotion4.jpg")" class="card-img" style="object-fit: cover; height: 28rem;">
                    <div class="card-img-overlay d-flex flex-column justify-content-center align-items-center text-white text-center p-4">
                        <h2 class="fw-bold mb-0 text-uppercase" style="font-size: 2.5rem;">Become a member</h2>
                    </div>
                </a>
            </div>

        </div>
    </div>
</div>

<div class="container-fluid bg-info mt-4">
    <div class="container py-5 row mx-auto">
        <div class="col-md-6 p-0">
            <div class="w-75">
                <h1 class="text-wrap fw-bold text-white">TRẢI NGHIỆM MIỄN PHÍ NGAY!</h1>
                <p class="mt-3 small text-wrap text-white">
                    Hãy thử điều gì đó mới mẻ trong năm nay bằng cách tham gia thế giới trải nghiệm thú vị và vui nhộn từ chúng tôi.
                    Chúng tôi cung cấp DÙNG THỬ MIỄN PHÍ 7 ngày cho tất cả khách mới. Để lại thông tin của bạn bên cạnh và chúng tôi sẽ liên hệ với bạn trong 24 giờ tới.
                </p>
            </div>
        </div>

        <div class="col-md-6 p-0">
            @Html.AntiForgeryToken()
            <form id="signUpForm" class="p-0 text-white w-100 mx-auto">
                <div class="mb-4">
                    <input type="text" name="HoTen" class="form-control border-0 border-bottom rounded-0 shadow-none" placeholder="Họ và tên*" required />
                </div>

                <div class="mb-4">
                    <input type="tel" name="SoDienThoai" class="form-control border-0 border-bottom rounded-0 shadow-none" placeholder="Số điện thoại*" required />
                </div>

                <div class="mb-4">
                    <input type="email" name="Email" class="form-control border-0 border-bottom rounded-0 shadow-none" placeholder="Email*" />
                </div>

                <button type="submit" class="btn btn-outline-primary btn-secondary text-white border-0 fw-bold px-4">ĐĂNG KÝ</button>

                <div id="message" class="mt-3 small fw-semibold"></div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-4 w-75 mx-auto shadow-lg border-0 position-relative">
            <div class="mt-3 border-0 text-center w-100">
                <h5 class="modal-title fw-bold text-primary text-center" id="loginModalLabel">THE-GYM MEMBER</h5>
            </div>
            <img src="@Url.Content("~/Content/Images/Logo.png")" class="mx-auto" style="width: 5rem" />
            <div class="modal-body text-center py-2">
                <p class="mb-4 fw-semibold" style="font-size: 16px">
                    Vui lòng đăng nhập tài khoản <strong>The GYM</strong> để xem ưu đãi và thanh toán dễ dàng hơn.
                </p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="@Url.Action("Login", "Account", new { returnUrl = Request.RawUrl })" class="btn btn-primary py-2 fw-semibold" style="width: 10rem">
                        Đăng nhập
                    </a>
                    <a href="@Url.Action("Register", "Account", new { returnUrl = Request.RawUrl })" class="btn btn-outline-primary py-2 fw-semibold" style="width: 10rem">
                        Đăng ký
                    </a>
                </div>
            </div>
            <button type="button" class="btn-close position-absolute mt-2" data-bs-dismiss="modal" style="right: 0.7rem" aria-label="Đóng"></button>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/jquery")
<script>
$(document).ready(function () {
    $('#signUpForm').on('submit', function (e) {
        e.preventDefault(); // ngăn reload

        var form = $(this);
        var token = $('input[name="__RequestVerificationToken"]').val();

        $.ajax({
            url: '@Url.Action("SignForFree", "Home")',
            type: 'POST',
            data: form.serialize() + "&__RequestVerificationToken=" + token,
            success: function (res) {
                const msg = $('#message');
                msg.hide().html(`<span class="${res.success ? 'text-success' : 'text-danger'}">${res.message}</span>`).fadeIn();
                if (res.success) form[0].reset();
            },
            error: function () {
                $('#message').hide().html('<span class="text-danger">Đã xảy ra lỗi, vui lòng thử lại.</span>').fadeIn();
            }
        });
    });
});
</script>



