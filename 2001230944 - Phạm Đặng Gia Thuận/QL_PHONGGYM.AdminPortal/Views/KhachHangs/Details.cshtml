@model QL_PHONGGYM.AdminPortal.Models.KhachHang

@{
    ViewBag.Title = "Chi Tiết Khách Hàng";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    /* ====== STYLE CHUNG ====== */
    .container-custom {
        padding: 30px;
        background: #f2f6f9;
        min-height: 100vh;
    }

    .page-header {
        background: #5dade2;
        padding: 30px;
        border-radius: 10px;
        margin-bottom: 30px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

        .page-header h2 {
            color: white;
            margin: 0;
            font-weight: 500;
            font-size: 26px;
        }

    /* ====== KHUNG THÔNG TIN ====== */
    .details-container {
        background: white;
        border-radius: 10px;
        padding: 30px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.08);
        max-width: 900px;
        margin: 0 auto;
    }

    .info-title {
        color: #5dade2;
        font-size: 20px;
        font-weight: 500;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #5dade2;
    }

    .info-item {
        display: flex;
        padding: 12px 0;
        border-bottom: 1px solid #f0f0f0;
    }

        .info-item:last-child {
            border-bottom: none;
        }

    .info-label {
        font-weight: 500;
        color: #555;
        width: 180px;
        flex-shrink: 0;
    }

    .info-value {
        color: #333;
        flex: 1;
    }

    /* ====== SỔ ĐỊA CHỈ ====== */
    .address-header {
        margin-top: 40px;
        padding-bottom: 10px;
        border-bottom: 2px solid #5dade2;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

        .address-header h3 {
            margin: 0;
            color: #5dade2;
            font-weight: 600;
        }

    .btn-add-address {
        background: #58d68d;
        color: white;
        padding: 8px 15px;
        border-radius: 5px;
        text-decoration: none;
        font-size: 14px;
        transition: 0.2s;
    }

        .btn-add-address:hover {
            background: #2ecc71;
            text-decoration: none;
            color: white;
        }

    /* ====== BẢNG ĐỊA CHỈ ====== */
    .address-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

        .address-table th {
            background: #5dade2;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 500;
        }

        .address-table td {
            padding: 12px;
            border-bottom: 1px solid #eaeaea;
        }

    .badge-default {
        background: #2ecc71;
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 13px;
    }

    .btn-action {
        color: #3498db;
        font-weight: 500;
        text-decoration: none;
        margin-right: 8px;
    }

        .btn-action:hover {
            text-decoration: underline;
        }

    /* ====== BUTTON GROUP ====== */
    .button-group {
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #eee;
        display: flex;
        gap: 10px;
    }

    .btn-edit {
        background: #5dade2;
        color: white;
        padding: 12px 30px;
        border-radius: 5px;
        text-decoration: none;
        font-size: 15px;
        font-weight: 500;
        transition: 0.3s;
    }

        .btn-edit:hover {
            background: #3498db;
        }

    .btn-back {
        background: #6c757d;
        color: white;
        padding: 12px 30px;
        border-radius: 5px;
        text-decoration: none;
        font-size: 15px;
        transition: 0.3s;
    }

        .btn-back:hover {
            background: #5a6268;
        }

    /* ====== MOBILE ====== */
    @@media (max-width: 768px) {
        .info-item {
            flex-direction: column;
        }

        .info-label {
            width: 100%;
        }
    }
</style>

<div class="container-custom">
    <div class="page-header">
        <h2>Chi Tiết Khách Hàng</h2>
    </div>

    <div class="details-container">

        <h4 class="info-title">Thông Tin Khách Hàng</h4>

        <div class="info-item">
            <div class="info-label">Tên khách hàng:</div>
            <div class="info-value">@Model.TenKH</div>
        </div>

        <div class="info-item">
            <div class="info-label">Ngày sinh:</div>
            <div class="info-value">
                @(Model.NgaySinh.HasValue ? Model.NgaySinh.Value.ToString("dd/MM/yyyy") : "")
            </div>
        </div>

        <div class="info-item">
            <div class="info-label">Giới tính:</div>
            <div class="info-value">@Model.GioiTinh</div>
        </div>

        <div class="info-item">
            <div class="info-label">Số điện thoại:</div>
            <div class="info-value">@Model.SDT</div>
        </div>

        <div class="info-item">
            <div class="info-label">Email:</div>
            <div class="info-value">@Model.Email</div>
        </div>

        <div class="info-item">
            <div class="info-label">Mã loại khách hàng:</div>
            <div class="info-value">@Model.MaLoaiKH</div>
        </div>

        <div class="info-item">
            <div class="info-label">Tên đăng nhập:</div>
            <div class="info-value">@Model.TenDangNhap</div>
        </div>


        <!-- ====== SỔ ĐỊA CHỈ ====== -->
        <div class="address-header">
            <h3>📍 Sổ Địa Chỉ</h3>
            @Html.ActionLink("➕ Thêm Địa Chỉ", "Create", "DiaChi", new { MaKH = Model.MaKH }, new { @class = "btn-add-address" })
        </div>

        @if (Model.DiaChis != null && Model.DiaChis.Any())
        {
            <table class="address-table">
                <thead>
                    <tr>
                        <th>Địa chỉ</th>
                        <th>Khu vực</th>
                        <th>Mặc định</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var dc in Model.DiaChis)
                    {
                        <tr>
                            <td>@dc.DiaChiCuThe</td>
                            <td>@dc.PhuongXa, @dc.QuanHuyen, @dc.TinhThanhPho</td>
                            <td>
                                @if (dc.LaDiaChiMacDinh)
                                {
                                    <span class="badge-default">Mặc định</span>
                                }
                            </td>
                            <td>
                                @Html.ActionLink("Sửa", "Edit", "DiaChis", new { id = dc.MaDC }, new { @class = "btn-action" })
                                @Html.ActionLink("Xóa", "Delete", "DiaChis", new { id = dc.MaDC }, new { @class = "btn-action" })
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p class="text-muted">Khách hàng này chưa có địa chỉ nào.</p>
        }

        <div class="button-group">
            @Html.ActionLink("Chỉnh Sửa", "Edit", new { id = Model.MaKH }, new { @class = "btn-edit" })
            @Html.ActionLink("Quay Lại", "Index", null, new { @class = "btn-back" })
        </div>
    </div>
</div>
