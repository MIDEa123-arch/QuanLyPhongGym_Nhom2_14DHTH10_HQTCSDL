@model IEnumerable<QL_PHONGGYM.AdminPortal.Models.LopHoc>

@{
    ViewBag.Title = "Quản Lý Lớp Học";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- BOOTSTRAP 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<style>
    /* GIỮ NỀN TRẮNG TRONG DASHBOARD */
    .page-wrapper {
        background: #f8fafc !important;
        padding: 25px;
    }

    /* CARD */
    .content-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        border: 1px solid #e2e8f0;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .page-title {
        font-size: 26px;
        font-weight: 700;
        color: #0d4ea6;
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
    }

    /* BUTTON */
    .btn-add {
        background: #3b82f6;
        color: #fff;
        font-weight: 600;
        border-radius: 8px;
    }

        .btn-add:hover {
            background: #2563eb;
        }

    /* TABLE */
    .table-custom thead {
        background: #e2ecff;
    }

    .table-custom th {
        color: #1e3a8a;
        font-weight: 700;
        font-size: 14px;
    }

    .table-custom td {
        vertical-align: middle;
    }

    /* BADGE */
    .badge-info {
        background: #dbeafe;
        color: #1e40af;
        font-weight: 600;
    }

    /* ACTION BUTTONS */
    .btn-edit {
        background: #e0f2fe;
        color: #0369a1;
        font-weight: 600;
        border-radius: 6px;
        padding: 4px 10px;
    }

        .btn-edit:hover {
            background: #bae6fd;
        }

    .btn-delete {
        background: #fee2e2;
        color: #b91c1c;
        font-weight: 600;
        border-radius: 6px;
        padding: 4px 10px;
    }

        .btn-delete:hover {
            background: #fecaca;
        }
</style>

<div class="page-wrapper">
    <div class="content-card">

        <div class="d-flex justify-content-between align-items-center">
            <div class="page-title">🧘 Quản Lý Lớp Học</div>

            @Html.ActionLink("+ Thêm Lớp Học Mới", "Create", null, new { @class = "btn btn-add" })
        </div>

        <table class="table table-hover table-custom">
            <thead>
                <tr>
                    <th>Tên Lớp / Chuyên Môn</th>
                    <th>GV Chủ Nhiệm</th>
                    <th>Thời Gian</th>
                    <th>Học Phí</th>
                    <th>Sĩ Số</th>
                    <th>Thao Tác</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            <div class="fw-bold text-primary">@item.TenLop</div>
                            <div class="text-muted small">
                                @if (item.LichLops != null && item.LichLops.Any())
                                {
                                    var lich = item.LichLops.First();
                                    <span>@lich.GioBatDau.ToString(@"hh\:mm") - @lich.GioKetThuc.ToString(@"hh\:mm")</span>
                                }
                            </div>
                            <span class="badge badge-info mt-1">@item.ChuyenMon.TenChuyenMon</span>
                        </td>

                        <td>
                            @if (item.NhanVien != null)
                            {
                                <span class="badge badge-info">@item.NhanVien.TenNV</span>
                            }
                            else
                            {
                                <span class="text-muted fst-italic">Chưa phân công</span>
                            }
                        </td>

                        <td>
                            <div class="fw-bold">@item.NgayBatDau.ToString("dd/MM/yyyy")</div>
                            <div class="text-secondary small">đến</div>
                            <div class="fw-bold">@item.NgayKetThuc.ToString("dd/MM/yyyy")</div>
                            <div class="mt-1 text-primary fw-bold small">(@item.SoBuoi buổi)</div>
                        </td>

                        <td class="fw-bold text-danger">@item.HocPhi.ToString("#,##0") đ</td>

                        <td>
                            <span class="badge bg-light text-dark border">
                                Max: @item.SiSoToiDa
                            </span>
                        </td>

                        <td>
                            @Html.ActionLink("Sửa", "Edit", new { id = item.MaLop }, new { @class = "btn btn-edit me-1" })
                            @Html.ActionLink("Xóa", "Delete", new { id = item.MaLop }, new { @class = "btn btn-delete" })
                        </td>
                    </tr>
                }
            </tbody>
        </table>

    </div>
</div>
